(function(c,b,a,d){Foundation.libs.clearing={name:"clearing",version:"5.0.0",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:false,locked:false},init:function(g,h,f){var e=this;Foundation.inherit(this,"throttle loaded");this.bindings(h,f);if(c(this.scope).is("[data-clearing]")){this.assemble(c("li",this.scope))}else{c("[data-clearing]",this.scope).each(function(){e.assemble(c("li",this))})}},events:function(f){var e=this;c(this.scope).off(".clearing").on("click.fndtn.clearing","ul[data-clearing] li",function(l,k,j){var k=k||c(this),j=j||k,h=k.next("li"),g=k.closest("[data-clearing]").data("clearing-init"),i=c(l.target);l.preventDefault();if(!g){e.init();g=k.closest("[data-clearing]").data("clearing-init")}if(j.hasClass("visible")&&k[0]===j[0]&&h.length>0&&e.is_open(k)){j=h;i=c("img",j)}e.open(i,k,j);e.update_paddles(j)}).on("click.fndtn.clearing",".clearing-main-next",function(g){e.nav(g,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(g){e.nav(g,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(g){Foundation.libs.clearing.close(g,this)}).on("keydown.fndtn.clearing",function(g){e.keydown(g)});c(b).off(".clearing").on("resize.fndtn.clearing",function(){e.resize()});this.swipe_events(f)},swipe_events:function(f){var e=this;c(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(h){if(!h.touches){h=h.originalEvent}var g={start_page_x:h.touches[0].pageX,start_page_y:h.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:d};c(this).data("swipe-transition",g);h.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(i){if(!i.touches){i=i.originalEvent}if(i.touches.length>1||i.scale&&i.scale!==1){return}var g=c(this).data("swipe-transition");if(typeof g==="undefined"){g={}}g.delta_x=i.touches[0].pageX-g.start_page_x;if(typeof g.is_scrolling==="undefined"){g.is_scrolling=!!(g.is_scrolling||Math.abs(g.delta_x)<Math.abs(i.touches[0].pageY-g.start_page_y))}if(!g.is_scrolling&&!g.active){i.preventDefault();var h=(g.delta_x<0)?"next":"prev";g.active=true;e.nav(i,h)}}).on("touchend.fndtn.clearing",".visible-img",function(g){c(this).data("swipe-transition",{});g.stopPropagation()})},assemble:function(k){var g=k.parent();if(g.parent().hasClass("carousel")){return}g.after('<div id="foundationClearingHolder"></div>');var f=c("#foundationClearingHolder"),h=g.data("clearing-init"),e=g.detach(),i={grid:'<div class="carousel">'+e[0].outerHTML+"</div>",viewing:h.templates.viewing},j='<div class="clearing-assembled"><div>'+i.viewing+i.grid+"</div></div>";return f.after(j).remove()},open:function(h,k,j){var f=j.closest(".clearing-assembled"),e=c("div",f).first(),g=c(".visible-img",e),i=c("img",g).not(h);if(!this.locked()){i.attr("src",this.load(h)).css("visibility","hidden");this.loaded(i,function(){i.css("visibility","visible");f.addClass("clearing-blackout");e.addClass("clearing-container");g.show();this.fix_height(j).caption(c(".clearing-caption",g),h).center(i).shift(k,j,function(){j.siblings().removeClass("visible");j.addClass("visible")})}.bind(this))}},close:function(j,i){j.preventDefault();var g=(function(e){if(/blackout/.test(e.selector)){return e}else{return e.closest(".clearing-blackout")}}(c(i))),f,h;if(i===j.target&&g){f=c("div",g).first();h=c(".visible-img",f);this.settings.prev_index=0;c("ul[data-clearing]",g).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout");f.removeClass("clearing-container");h.hide()}return false},is_open:function(e){return e.parent().prop("style").length>0},keydown:function(g){var f=c("ul[data-clearing]",".clearing-blackout");if(g.which===39){this.go(f,"next")}if(g.which===37){this.go(f,"prev")}if(g.which===27){c("a.clearing-close").trigger("click")}},nav:function(h,g){var f=c("ul[data-clearing]",".clearing-blackout");h.preventDefault();this.go(f,g)},resize:function(){var e=c("img",".clearing-blackout .visible-img");if(e.length){this.center(e)}},fix_height:function(g){var f=g.parent().children(),e=this;f.each(function(){var h=c(this),i=h.find("img");if(h.height()>i.outerHeight()){h.addClass("fix-height")}}).closest("ul").width(f.length*100+"%");return this},update_paddles:function(f){var e=f.closest(".carousel").siblings(".visible-img");if(f.next().length>0){c(".clearing-main-next",e).removeClass("disabled")}else{c(".clearing-main-next",e).addClass("disabled")}if(f.prev().length>0){c(".clearing-main-prev",e).removeClass("disabled")}else{c(".clearing-main-prev",e).addClass("disabled")}},center:function(e){if(!this.rtl){e.css({marginLeft:-(e.outerWidth()/2),marginTop:-(e.outerHeight()/2)})}else{e.css({marginRight:-(e.outerWidth()/2),marginTop:-(e.outerHeight()/2)})}return this},load:function(f){if(f[0].nodeName==="A"){var e=f.attr("href")
}else{var e=f.parent().attr("href")}this.preload(f);if(e){return e}return f.attr("src")},preload:function(e){this.img(e.closest("li").next()).img(e.closest("li").prev())},img:function(e){if(e.length){var f=new Image(),g=c("a",e);if(g.length){f.src=g.attr("href")}else{f.src=c("img",e).attr("src")}}return this},caption:function(e,g){var f=g.data("caption");if(f){e.html(f).show()}else{e.text("").hide()}return this},go:function(e,h){var g=c(".visible",e),f=g[h]();if(f.length){c("img",f).trigger("click",[g,f])}},shift:function(h,i,m){var j=i.parent(),g=this.settings.prev_index||i.index(),k=this.direction(j,h,i),f=parseInt(j.css("left"),10),e=i.outerWidth(),l;if(i.index()!==g&&!/skip/.test(k)){if(/left/.test(k)){this.lock();j.animate({left:f+e},300,this.unlock())}else{if(/right/.test(k)){this.lock();j.animate({left:f-e},300,this.unlock())}}}else{if(/skip/.test(k)){l=i.index()-this.settings.up_count;this.lock();if(l>0){j.animate({left:-(l*e)},300,this.unlock())}else{j.animate({left:0},300,this.unlock())}}}m()},direction:function(h,j,i){var g=c("li",h),f=g.outerWidth()+(g.outerWidth()/4),k=Math.floor(c(".clearing-container").outerWidth()/f)-1,l=g.index(i),e;this.settings.up_count=k;if(this.adjacent(this.settings.prev_index,l)){if((l>k)&&l>this.settings.prev_index){e="right"}else{if((l>k-1)&&l<=this.settings.prev_index){e="left"}else{e=false}}}else{e="skip"}this.settings.prev_index=l;return e},adjacent:function(g,f){for(var e=f+1;e>=f-1;e--){if(e===g){return true}}return false},lock:function(){this.settings.locked=true},unlock:function(){this.settings.locked=false},locked:function(){return this.settings.locked},off:function(){c(this.scope).off(".fndtn.clearing");c(b).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,this,this.document));